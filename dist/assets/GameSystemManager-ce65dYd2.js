class f{validateConstructorInputs(r,t,i){const e=[];if(typeof r!="number"||isNaN(r)?e.push("Canvas width must be a valid number"):r<200?e.push("Canvas width must be at least 200px"):r>1e4&&e.push("Canvas width must not exceed 10000px"),typeof t!="number"||isNaN(t)?e.push("Canvas height must be a valid number"):t<200?e.push("Canvas height must be at least 200px"):t>1e4&&e.push("Canvas height must not exceed 10000px"),typeof i!="number"||isNaN(i)?e.push("Grid size must be a valid number"):i<10?e.push("Grid size must be at least 10"):i>200&&e.push("Grid size must not exceed 200"),r>0&&t>0){const n=r/t;(n<.5||n>3)&&e.push("Canvas aspect ratio should be between 0.5 and 3.0 for optimal path generation")}if(e.length>0){const n=new Error(`PathGenerator validation failed: ${e.join(", ")}`);throw n.name="PathGeneratorValidationError",n.validationErrors=e,n}}constructor(r,t,i,e={}){this.validateConstructorInputs(r,t,i),this.canvasWidth=r,this.canvasHeight=t,this.gridSize=i,this.productionMode=e.productionMode||!1,this.errorHandlingConfig={maxValidationRetries:this.productionMode?2:5,maxPathGenerationRetries:this.productionMode?1:3,enableFallbackGeneration:!0,logErrors:!this.productionMode,throwOnCriticalErrors:!1,fallbackToSimplePath:!0,minCanvasSize:200,maxCanvasSize:1e4,minGridSize:10,maxGridSize:200,enableDetailedErrorTracking:!this.productionMode,enableValidationOverhead:!this.productionMode,enablePerformanceMonitoring:!this.productionMode,errorBatchSize:this.productionMode?10:1,errorBatchInterval:this.productionMode?5e3:0,circularBufferSize:this.productionMode?25:50},this.errorStats={validationErrors:0,generationErrors:0,fallbacksUsed:0,criticalErrors:0,inputValidationErrors:0,reachabilityErrors:0,lastError:null,errorHistory:[],startTime:Date.now(),totalErrors:0,errorBatchQueue:[],lastBatchFlush:Date.now(),circularBufferIndex:0,circularBufferFull:!1},this.productionMode&&(this.errorStats.errorHistory=new Array(this.errorHandlingConfig.circularBufferSize),this.errorStats.errorHistory.fill(null)),this.errorBatchTimer=null,this.productionMode&&this.errorHandlingConfig.errorBatchInterval>0&&this.setupErrorBatching(),this.minPathLength=300,this.maxPathLength=800,this.minCurveRadius=50,this.maxCurveRadius=150,this.segmentLength=60,this.maxIterations=this.productionMode?250:500,this.maxRetries=this.productionMode?2:3,this.performanceThreshold=this.productionMode?25:50,this.enableExtensiveValidation=!this.productionMode,this.enableDetailedLogging=!this.productionMode,this.enableDebugTracing=!this.productionMode,this.rngCache=new Map,this.cacheSize=1e3,this.cacheMissCount=0,this.cacheHitCount=0,this.performanceStats={totalGenerations:0,averageTime:0,maxTime:0,minTime:1/0,failureCount:0,fallbackCount:0,cacheHitRate:0,lightweightOperations:0,validationSkips:0,productionOptimizations:0},this.isGeneratingAsync=!1,this.currentAsyncTask=null,this.asyncCallbacks=new Map,this.themes={urban:{straightBias:.3,curveComplexity:.6,obstacleTypes:["building","intersection"],pathWidth:40},forest:{straightBias:.1,curveComplexity:.8,obstacleTypes:["tree","rock"],pathWidth:35},mountain:{straightBias:.4,curveComplexity:.5,obstacleTypes:["cliff","boulder"],pathWidth:45},cyber:{straightBias:.6,curveComplexity:.9,obstacleTypes:["firewall","node"],pathWidth:50}},this.seed=0,this.rng=this.createSeededRNG(this.seed),this.flexibleValidation=null,this.levelPreservation=null,this.validationEnabled=!0,this.validationProfile="balanced",this.previewMode=!1,console.log(`PathGenerator initialized with ${this.productionMode?"PRODUCTION":"DEVELOPMENT"} error handling`)}setupErrorBatching(){this.productionMode&&(this.errorBatchTimer=setInterval(()=>{this.flushErrorBatch()},this.errorHandlingConfig.errorBatchInterval))}flushErrorBatch(){if(this.errorStats.errorBatchQueue.length!==0)try{const r=this.createErrorBatchSummary();this.errorHandlingConfig.logErrors&&console.warn(`PathGenerator Error Batch [${r.count} errors]:`,r),this.errorStats.errorBatchQueue=[],this.errorStats.lastBatchFlush=Date.now()}catch(r){this.productionMode||console.error("Failed to flush error batch:",r)}}createErrorBatchSummary(){const r=this.errorStats.errorBatchQueue,t={count:r.length,timespan:Date.now()-this.errorStats.lastBatchFlush,errorTypes:{},contexts:{},criticalCount:0,mostRecentError:r[r.length-1]};return r.forEach(i=>{const e=i.errorType||"Unknown";t.errorTypes[e]=(t.errorTypes[e]||0)+1;const a=i.context||"Unknown";t.contexts[a]=(t.contexts[a]||0)+1,i.level==="critical"&&t.criticalCount++}),t}addToCircularBuffer(r){if(!this.productionMode)return;const t=this.errorStats.errorHistory,i=this.errorStats.circularBufferIndex;t[i]=r,this.errorStats.circularBufferIndex=(i+1)%this.errorHandlingConfig.circularBufferSize,this.errorStats.circularBufferIndex===0&&!this.errorStats.circularBufferFull&&(this.errorStats.circularBufferFull=!0)}getRecentErrors(r=10){if(!this.productionMode)return this.errorStats.errorHistory.slice(-r);const t=this.errorStats.errorHistory,i=[],e=Math.min(r,this.errorHandlingConfig.circularBufferSize);if(!this.errorStats.circularBufferFull)return t.slice(0,this.errorStats.circularBufferIndex).filter(s=>s!==null).slice(-e);const a=this.errorStats.circularBufferIndex;for(let s=0;s<e;s++){const o=(a-1-s+this.errorHandlingConfig.circularBufferSize)%this.errorHandlingConfig.circularBufferSize;t[o]!==null&&i.unshift(t[o])}return i}logErrorLightweight(r,t="",i="error"){this.errorStats.totalErrors++;const e={timestamp:Date.now(),level:i,message:r.message||r,context:t,errorType:r.name||"Unknown",...this.productionMode?{}:{stack:r.stack,id:`error_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}};if(this.updateErrorCounters(t,i),this.productionMode)this.addToCircularBuffer(e),this.errorHandlingConfig.errorBatchInterval>0?(this.errorStats.errorBatchQueue.push(e),this.errorStats.errorBatchQueue.length>=this.errorHandlingConfig.errorBatchSize&&this.flushErrorBatch()):i==="critical"&&console.error(`PathGenerator CRITICAL: ${t} - ${e.message}`);else{this.logError(r,t,i);return}this.errorStats.lastError=e}updateErrorCounters(r,t){t==="critical"&&this.errorStats.criticalErrors++,r&&(r.includes("validation")?this.errorStats.validationErrors++:r.includes("generation")?this.errorStats.generationErrors++:r.includes("input")?this.errorStats.inputValidationErrors++:r.includes("reachability")&&this.errorStats.reachabilityErrors++)}validatePointLightweight(r,t=""){return this.productionMode?!r||typeof r.x!="number"||typeof r.y!="number"?(this.performanceStats.validationSkips++,!1):(this.performanceStats.lightweightOperations++,!0):this.validatePoint(r,t)}validatePointReachabilityLightweight(r,t,i=""){if(this.productionMode){this.performanceStats.validationSkips++,this.performanceStats.lightweightOperations++;const e=t.x-r.x,a=t.y-r.y,s=Math.sqrt(e*e+a*a);return{isReachable:s>50,distance:s,startPoint:r,endPoint:t}}return this.validatePointReachability(r,t,i)}setProductionMode(r){const t=this.productionMode;this.productionMode=r,r&&!t?this.optimizeForProduction():!r&&t&&this.optimizeForDevelopment(),console.log(`PathGenerator switched to ${r?"PRODUCTION":"DEVELOPMENT"} mode`)}optimizeForProduction(){this.errorHandlingConfig.maxValidationRetries=2,this.errorHandlingConfig.maxPathGenerationRetries=1,this.errorHandlingConfig.logErrors=!1,this.errorHandlingConfig.enableDetailedErrorTracking=!1,this.errorHandlingConfig.enableValidationOverhead=!1,this.maxIterations=250,this.maxRetries=2,this.performanceThreshold=25,this.errorHandlingConfig.errorBatchInterval>0&&this.setupErrorBatching(),this.convertToCircularBuffer(),this.performanceStats.productionOptimizations++}optimizeForDevelopment(){this.errorHandlingConfig.maxValidationRetries=5,this.errorHandlingConfig.maxPathGenerationRetries=3,this.errorHandlingConfig.logErrors=!0,this.errorHandlingConfig.enableDetailedErrorTracking=!0,this.errorHandlingConfig.enableValidationOverhead=!0,this.maxIterations=500,this.maxRetries=3,this.performanceThreshold=50,this.errorBatchTimer&&(clearInterval(this.errorBatchTimer),this.errorBatchTimer=null),this.convertFromCircularBuffer()}convertToCircularBuffer(){const r=this.errorStats.errorHistory,t=this.errorHandlingConfig.circularBufferSize;this.errorStats.errorHistory=new Array(t),this.errorStats.errorHistory.fill(null),this.errorStats.circularBufferIndex=0,this.errorStats.circularBufferFull=!1,r.slice(-t).forEach(e=>{e&&this.addToCircularBuffer(e)})}convertFromCircularBuffer(){const r=this.getRecentErrors(50);this.errorStats.errorHistory=r,this.errorStats.circularBufferIndex=0,this.errorStats.circularBufferFull=!1}getProductionStatus(){return{productionMode:this.productionMode,errorStats:{totalErrors:this.errorStats.totalErrors,recentErrors:this.getRecentErrors(5),criticalErrors:this.errorStats.criticalErrors,batchQueueSize:this.errorStats.errorBatchQueue.length,lastBatchFlush:this.errorStats.lastBatchFlush,circularBufferUsage:this.productionMode?`${this.errorStats.circularBufferFull?"Full":this.errorStats.circularBufferIndex}/${this.errorHandlingConfig.circularBufferSize}`:"N/A"},performanceOptimizations:{lightweightOperations:this.performanceStats.lightweightOperations,validationSkips:this.performanceStats.validationSkips,productionOptimizations:this.performanceStats.productionOptimizations},configuration:{maxIterations:this.maxIterations,maxRetries:this.maxRetries,errorBatchSize:this.errorHandlingConfig.errorBatchSize,errorBatchInterval:this.errorHandlingConfig.errorBatchInterval,circularBufferSize:this.errorHandlingConfig.circularBufferSize}}}destroy(){this.errorBatchTimer&&(clearInterval(this.errorBatchTimer),this.errorBatchTimer=null),this.errorStats.errorBatchQueue.length>0&&this.flushErrorBatch(),this.productionMode&&(this.errorStats.errorHistory.fill(null),this.errorStats.circularBufferIndex=0,this.errorStats.circularBufferFull=!1),console.log("PathGenerator destroyed and cleaned up")}logError(r,t="",i="error"){if(this.productionMode)return this.logErrorLightweight(r,t,i);const e={timestamp:Date.now(),level:i,message:r.message||r,context:t,stack:r.stack,errorType:r.name||"Unknown",id:`error_${Date.now()}_${Math.random().toString(36).substr(2,9)}`};return this.errorStats.errorHistory.push(e),this.errorStats.errorHistory.length>50&&this.errorStats.errorHistory.shift(),this.errorStats.lastError=e,this.updateErrorCounters(t,i),this.errorHandlingConfig.logErrors&&(console[i==="critical"?"error":i==="warning"?"warn":"log"](`PathGenerator ${i.toUpperCase()}: ${t} - ${r.message||r}`),r.stack&&i==="critical"&&console.error("Stack trace:",r.stack)),e.id}validatePoint(r,t="point validation"){if(this.productionMode){if(!this.validatePointLightweight(r,t))throw this.createValidationError("Point validation failed (lightweight)",t);return!0}if(!r||typeof r!="object")throw this.createValidationError("Point must be a valid object",t);if(typeof r.x!="number"||isNaN(r.x))throw this.createValidationError("Point x coordinate must be a valid number",t);if(typeof r.y!="number"||isNaN(r.y))throw this.createValidationError("Point y coordinate must be a valid number",t);if(r.x<0||r.x>this.canvasWidth)throw this.createValidationError(`Point x coordinate (${r.x}) is outside canvas bounds (0-${this.canvasWidth})`,t);if(r.y<0||r.y>this.canvasHeight)throw this.createValidationError(`Point y coordinate (${r.y}) is outside canvas bounds (0-${this.canvasHeight})`,t);return!0}validatePointReachability(r,t,i="reachability check"){if(this.productionMode)return this.validatePointReachabilityLightweight(r,t,i);try{this.validatePoint(r,`${i} - start point`),this.validatePoint(t,`${i} - end point`);const e=Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2));if(e<this.minPathLength*.5)throw this.createValidationError(`Distance between points (${e.toFixed(2)}) is too small for valid path generation`,i);const a=Math.sqrt(Math.pow(this.canvasWidth,2)+Math.pow(this.canvasHeight,2))*1.5;if(e>a)throw this.createValidationError(`Distance between points (${e.toFixed(2)}) exceeds reasonable path generation limits`,i);return{isReachable:!0,distance:e,startPoint:r,endPoint:t}}catch(e){return this.logError(e,`${i} - reachability validation`,"warning"),{isReachable:!1,distance:0,error:e.message}}}createValidationError(r,t=""){const i=new Error(`${t}: ${r}`);return i.name="PathGeneratorValidationError",i.context=t,i.timestamp=Date.now(),i}validateTheme(r,t="theme validation"){if(typeof r=="string"){if(!this.themes[r])throw this.createValidationError(`Unknown theme '${r}'. Available themes: ${Object.keys(this.themes).join(", ")}`,t);return this.themes[r]}if(typeof r=="object"&&r!==null){const e=["straightBias","curveComplexity","obstacleTypes","pathWidth"].filter(a=>!(a in r));if(e.length>0)throw this.createValidationError(`Theme object missing required properties: ${e.join(", ")}`,t);if(typeof r.straightBias!="number"||r.straightBias<0||r.straightBias>1)throw this.createValidationError("Theme straightBias must be a number between 0 and 1",t);if(typeof r.curveComplexity!="number"||r.curveComplexity<0||r.curveComplexity>1)throw this.createValidationError("Theme curveComplexity must be a number between 0 and 1",t);if(typeof r.pathWidth!="number"||r.pathWidth<10||r.pathWidth>200)throw this.createValidationError("Theme pathWidth must be a number between 10 and 200",t);return r}throw this.createValidationError("Theme must be a string or valid configuration object",t)}generateFallbackPath(r,t,i="",e="fallback generation"){this.logError(new Error(i),`${e} - creating fallback path`,"warning"),this.errorStats.fallbacksUsed++;try{this.validatePoint(r,`${e} - fallback start point`),this.validatePoint(t,`${e} - fallback end point`);const a=[{...r}],s=Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2)),o=Math.max(3,Math.ceil(s/(this.segmentLength*2)));for(let h=1;h<o;h++){const n=h/o,l=r.x+(t.x-r.x)*n,c=r.y+(t.y-r.y)*n,u=20,d=(Math.random()-.5)*u,m=(Math.random()-.5)*u;a.push({x:Math.max(50,Math.min(this.canvasWidth-50,l+d)),y:Math.max(50,Math.min(this.canvasHeight-50,c+m))})}return a.push({...t}),a.metadata={isFallback:!0,fallbackReason:i,generatedAt:Date.now(),totalPoints:a.length,fallbackType:"simple-interpolated"},this.logError(new Error(`Fallback path generated with ${a.length} points`),`${e} - fallback successful`,"info"),a}catch(a){return this.logError(a,`${e} - fallback generation failed`,"critical"),{0:{...r},1:{...t},length:2,metadata:{isFallback:!0,isMinimalFallback:!0,fallbackReason:`${i} + ${a.message}`,generatedAt:Date.now(),totalPoints:2,fallbackType:"minimal-direct"}}}}getErrorStats(){const r=this.errorStats.validationErrors+this.errorStats.generationErrors+this.errorStats.inputValidationErrors+this.errorStats.reachabilityErrors,t=Date.now()-this.errorStats.startTime;return{...this.errorStats,totalErrors:r,errorRate:t>0?(r/(t/1e3)).toFixed(4):0,uptimeMs:t,uptimeFormatted:this.formatUptime(t),recentErrors:this.errorStats.errorHistory.slice(-10)}}formatUptime(r){const t=Math.floor(r/1e3),i=Math.floor(t/60),e=Math.floor(i/60);return e>0?`${e}h ${i%60}m ${t%60}s`:i>0?`${i}m ${t%60}s`:`${t}s`}setErrorHandlingConfig(r){this.errorHandlingConfig={...this.errorHandlingConfig,...r},this.logError(new Error("Error handling configuration updated"),"configuration change","info")}getErrorHandlingConfig(){return{...this.errorHandlingConfig}}resetErrorStats(){const r={...this.errorStats};return this.errorStats={validationErrors:0,generationErrors:0,fallbacksUsed:0,criticalErrors:0,inputValidationErrors:0,reachabilityErrors:0,lastError:null,errorHistory:[],startTime:Date.now()},this.logError(new Error("Error statistics reset"),"statistics reset","info"),r}exportErrorHandlingData(){return{config:this.getErrorHandlingConfig(),stats:this.getErrorStats(),timestamp:Date.now(),version:"2.0-enhanced"}}createSeededRNG(r){try{(typeof r!="number"||isNaN(r))&&(this.logError(new Error(`Invalid seed provided: ${r}, using timestamp fallback`),"RNG initialization","warning"),r=Date.now()%1e6);let t=r;return()=>(t=(t*9301+49297)%233280,t/233280)}catch(t){return this.logError(t,"RNG creation failed","critical"),Math.random}}setSeed(r){this.seed=r,this.rng=this.createSeededRNG(r)}generateBasePath(r,t=null,i="cyber",e="hybrid"){const a=`generateBasePath(levelId: ${r}, theme: ${i}, pathMode: ${e})`;try{this.validateGenerateBasePathInputs(r,t,i,e,a);let s=0;const o=this.errorHandlingConfig.maxPathGenerationRetries;for(;s<o;)try{this.setupSeedSafely(r,t,a);const h=this.validateTheme(i,`${a} - theme validation`),n=this.generatePathSafely(r,h,e,a);return this.addPathMetadata(n,{levelId:r,seed:this.seed,theme:i,pathMode:e,retryCount:s,context:a}),this.logError(new Error(`Path generated successfully with ${n.length} points`),`${a} - success`,"info"),n}catch(h){if(s++,this.logError(h,`${a} - retry ${s}/${o}`,s<o?"warning":"error"),s>=o){if(this.errorHandlingConfig.enableFallbackGeneration)return this.generateFallbackPathForLevel(r,i,h,a);throw h}}}catch(s){if(this.logError(s,`${a} - critical failure`,"critical"),this.errorHandlingConfig.throwOnCriticalErrors)throw s;return this.generateMinimalFallbackPath(r,i,s,a)}}validateGenerateBasePathInputs(r,t,i,e,a){if(typeof r!="number"||isNaN(r)||r<0)throw this.createValidationError(`Level ID must be a non-negative number, got: ${r}`,`${a} - input validation`);if(t!==null&&(typeof t!="number"||isNaN(t)))throw this.createValidationError(`Seed must be null or a valid number, got: ${t}`,`${a} - input validation`);if(typeof i!="string"&&(typeof i!="object"||i===null))throw this.createValidationError(`Theme must be a string or configuration object, got: ${typeof i}`,`${a} - input validation`);const s=["static","dynamic","hybrid"];if(!s.includes(e))throw this.createValidationError(`Path mode must be one of: ${s.join(", ")}, got: ${e}`,`${a} - input validation`)}setupSeedSafely(r,t,i){try{if(t!==null)this.setSeed(t);else{const e=r*1e3+Date.now()%1e3;this.setSeed(e)}}catch(e){this.logError(e,`${i} - seed setup`,"warning"),this.setSeed(Date.now()%1e6)}}generatePathSafely(r,t,i,e){try{const a={x:100,y:this.canvasHeight/2},s={x:this.canvasWidth-100,y:this.canvasHeight/2},o=this.validatePointReachability(a,s,`${e} - path reachability`);if(!o.isReachable)throw this.createValidationError(`Entry and exit points are not reachable: ${o.error}`,`${e} - reachability check`);return this.generateSimplePath(a,s,t)}catch(a){throw this.logError(a,`${e} - path generation`,"warning"),a}}generateSimplePath(r,t,i){const e=[{...r}],a=Math.max(3,Math.floor(5+this.rng()*5));for(let s=1;s<a;s++){const o=s/a,h=r.x+(t.x-r.x)*o,n=r.y+(t.y-r.y)*o,l=50*(1-i.straightBias),c=i.curveComplexity,u=(this.rng()-.5)*l*c,d=(this.rng()-.5)*l*c;e.push({x:Math.max(50,Math.min(this.canvasWidth-50,h+u)),y:Math.max(50,Math.min(this.canvasHeight-50,n+d))})}return e.push({...t}),e}addPathMetadata(r,t){r.metadata={...t,generatedAt:Date.now(),totalPoints:r.length,pathBounds:this.calculatePathBounds(r),pathLength:this.calculatePathLength(r),generatorVersion:"2.0-enhanced"}}calculatePathBounds(r){if(!r||r.length===0)return null;let t=1/0,i=1/0,e=-1/0,a=-1/0;for(const s of r)s.x<t&&(t=s.x),s.x>e&&(e=s.x),s.y<i&&(i=s.y),s.y>a&&(a=s.y);return{minX:t,minY:i,maxX:e,maxY:a,width:e-t,height:a-i}}calculatePathLength(r){if(!r||r.length<2)return 0;let t=0;for(let i=1;i<r.length;i++){const e=r[i].x-r[i-1].x,a=r[i].y-r[i-1].y;t+=Math.sqrt(e*e+a*a)}return t}generateFallbackPathForLevel(r,t,i,e){try{const a={x:100,y:this.canvasHeight/2},s={x:this.canvasWidth-100,y:this.canvasHeight/2};return this.generateFallbackPath(a,s,`Level ${r} generation failed: ${i.message}`,`${e} - level fallback`)}catch(a){return this.logError(a,`${e} - level fallback failed`,"critical"),this.generateMinimalFallbackPath(r,t,a,e)}}generateMinimalFallbackPath(r,t,i,e){const a={x:100,y:this.canvasHeight/2},s={x:this.canvasWidth-100,y:this.canvasHeight/2};return{0:a,1:s,length:2,metadata:{isFallback:!0,isMinimalFallback:!0,levelId:r,theme:t,originalError:i.message,fallbackReason:"All generation methods failed",generatedAt:Date.now(),totalPoints:2,fallbackType:"minimal-emergency",context:e}}}}typeof module<"u"&&module.exports?module.exports=f:window.PathGenerator=f;class p{constructor(){this.systems=new Map,this.initializationComplete=!1,this.initialized={config:!1,audio:!1,save:!1,level:!1,pathGenerator:!1,achievements:!1}}async initialize(){try{return await this.initializeConfig(),await this.initializePathGenerator(),await this.initializeAudio(),await this.initializeSaveSystem(),await this.initializeLevelManager(),await this.initializeAchievements(),this.initializationComplete=!0,{success:!0,systems:this.systems}}catch(r){return{success:!1,error:r.message,systems:this.systems}}}async initializeConfig(){if(typeof window.CONFIG>"u")throw new Error("CONFIG object not available");this.systems.set("config",window.CONFIG),this.initialized.config=!0}async initializePathGenerator(){const r=this.systems.get("config")||{},t=new f(r.CANVAS_WIDTH||800,r.CANVAS_HEIGHT||600,r.GRID_SIZE||32);this.systems.set("pathGenerator",t),this.initialized.pathGenerator=!0}async initializeAudio(){const r=window.audioManager||null;this.systems.set("audio",r),this.initialized.audio=!!r}async initializeSaveSystem(){const r=window.saveSystem||null;this.systems.set("save",r),this.initialized.save=!!r}async initializeLevelManager(){const r=window.levelManager||(window.LevelManager?new window.LevelManager:null);if(!r)throw new Error("LevelManager not available");const t=this.systems.get("pathGenerator");t&&r.setPathGenerator&&r.setPathGenerator(t),this.systems.set("level",r),this.initialized.level=!0}async initializeAchievements(){const r=window.achievementManager||(window.AchievementManager?new window.AchievementManager:null);this.systems.set("achievements",r),this.initialized.achievements=!!r}getLevelManager(){return this.systems.get("level")||null}getAchievementManager(){return this.systems.get("achievements")||null}}export{p as default};
